<div style="margin: 25px;margin-top: 10px">
    <app-page-header [heading]="'Role Mapping'" [icon]="'fa-user'"></app-page-header>
    <div class="card ">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <form [formGroup]="myForm" class="form-horizontal" method="post" novalidate>

                            <!--<div class="form-group row">
                              <label class="col-md-3 col-form-label font-weight-bold" for="hf-RoleName">Role Name</label>
                              <div class="col-md-9">
                                <input type="text" class="form-control" formControlName="RoleName">
                             </div>
                            </div> -->
                            <div class="form-group row">
                                <label class="col-md-3 col-form-label font-weight-bold" for="hf-RoleName">Role
                                    Name</label>
                                <div class="col-md-9">
                                    <p-dropdown (onChange)="filterColumnRole($event)" [autoDisplayFirst]="false"
                                                [options]="roleList" [style]="{'width':'30%','scrollHeight':'150px'}"
                                                appendTo="body" formControlName="RoleName" placeholder="Select a Role"
                                                styleClass="form-control"></p-dropdown>
                                    <!--  editable="true" to makie it editable-->
                                </div>

                            </div>

                            <div class="form-group row">
                                <div class="col-md-12" formArrayName="roleCategorys">
                                    <div *ngFor="let address of formData.controls; let i=index;"
                                         class="panel panel-default">
                                        <div [formGroupName]="i">
                                            <div *ngIf="i==0" class="row">
                            <span class="col-lg-4 col-md-4">
                              <label class="font-weight-bold">Pages</label>
                            </span>

                                                <span class="col-lg-3 col-md-3">
                              <label class="font-weight-bold">Permissions</label>
                            </span>

                                                <span class="col-lg-3 col-md-3">
                                <label class="font-weight-bold">Add</label>
                              </span>
                                            </div>
                                            <!--
                                             <p-accordion [multiple]="true">
                                                 <p-accordionTab header="Quality Central">
                                                     <p-checkbox  name="group1"  value="read" formControlName="read" label="Read"  inputId="ny"  (onChange)="checkedRead($event,i)"></p-checkbox>
                                                     &nbsp;&nbsp;
                                                   <p-checkbox name="group1" value="write" formControlName="write" label="Write" inputId="sf" ></p-checkbox>
                                                   <p-checkbox name="group1" value="download" formControlName="download" label="Download" inputId="sf"></p-checkbox>
                                                 </p-accordionTab>
                                                 <p-accordionTab header="Quality Measure">
                                                     <p-checkbox  name="group1"  value="read" formControlName="read" label="Read"  inputId="ny"  (onChange)="checkedRead($event,i)"></p-checkbox>
                                                     &nbsp;&nbsp;
                                                   <p-checkbox name="group1" value="write" formControlName="write" label="Write" inputId="sf" ></p-checkbox>
                                                   <p-checkbox name="group1" value="download" formControlName="download" label="Download" inputId="sf"></p-checkbox>
                                                   </p-accordionTab>
                                                 <p-accordionTab header="Program Creator">
                                                     <p-checkbox  name="group1"  value="read" formControlName="read" label="Read"  inputId="ny"  (onChange)="checkedRead($event,i)"></p-checkbox>
                                                     &nbsp;&nbsp;
                                                   <p-checkbox name="group1" value="write" formControlName="write" label="Write" inputId="sf" ></p-checkbox>
                                                   <p-checkbox name="group1" value="download" formControlName="download" label="Download" inputId="sf"></p-checkbox>

                                                 </p-accordionTab>
                                             </p-accordion>
                                                  -->
                                            <!-- <h3>Multiple Selection with Checkbox</h3>
                                             <p-tree [value]="_categoriesTree" selectionMode="checkbox" [(selection)]="_selectedCategory" (onNodeSelect)="nodeSelect($event)" (onNodeUnselect)="nodeUnselect($event)" [propagateSelectionUp]="true" [propagateSelectionDown]="true"></p-tree>
                                             <div>Selected Nodes: <span *ngFor="let file of _selectedCategory">{{file.label}} </span></div>
                                            -->

                                            <div class="row">
                            <span class="col-lg-4 col-md-4" i=index let>

                                <p-dropdown (onChange)="pagelistChange($event,i)" [autoDisplayFirst]="false"
                                            [options]="pageList" [style]="{'width':'250px'}"
                                            formControlName="parentPage" placeholder="Select a Page"></p-dropdown>
                            </span>
                                                <span class="col-lg-3 col-md-3">
                                <div class="col-lg-12 col-md-12">

                                    Read <input class="inputCheckbox" formControlName="read" name="group1"
                                                type="checkbox" value="read">

                                    Write <input (onChange)="check($event)" class="inputCheckbox"
                                                 formControlName="write" name="group1" type="checkbox" value="write">

                                    Download <input class="inputCheckbox" formControlName="download" name="group1"
                                                    type="checkbox" value="download">
                                    <!--
                                <p-checkbox  name="group1"  value="read" formControlName="read" label="Read" binary="true" ></p-checkbox>
                                &nbsp;&nbsp;
                                <p-checkbox name="group1" value="write" formControlName="write" label="Write" (onChange)="check($event)"></p-checkbox>
                                <p-checkbox name="group1" value="download" formControlName="download" label="Download" ></p-checkbox>
                              -->
                            </div>
                            </span>
                                                <span *ngIf="myForm.controls.roleCategorys.controls.length == i+1"
                                                      class="col-lg-2 col-md-2 btn-background" style="padding: 5px;">
                              <button (click)="addCategory(i)" class="btn btn-secondary" i="index" let>+</button>
                            </span>
                                                <span *ngIf="myForm.controls.roleCategorys.controls.length != i+1"
                                                      class="col-lg-2 col-md-2 btn-background" style="padding: 5px;">
                              <button (click)="removeCategory(i)" class="btn btn-secondary">-</button>
                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer text-right">
                        <button (click)="onSubmit(myForm.value,myForm.valid)" class="btn btn-primary" type="submit">
                            <i class="fa fa-dot-circle-o"></i> Submit
                        </button>&nbsp;&nbsp;
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

